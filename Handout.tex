\documentclass{article}

\usepackage{amsmath}
\usepackage{fancyhdr} % Required for custom headers
\usepackage{lastpage} % Required to determine the last page

%----------------------------------------------------------------------------------------
% Margins
\topmargin=-0.45in
\evensidemargin=0in
\oddsidemargin=0in
\textwidth=6.5in
\textheight=9.0in
\headsep=0.25in

% Set up the header and footer
\pagestyle{fancy}
\lhead{Alex Pan and Alec Kosik} % Top left header
\chead{\textbf{Particle Filters}} % Top center head
\rhead{Page\ \thepage\ of\ \protect\pageref{LastPage}} % Top right header
\renewcommand\headrulewidth{0.4pt} % Size of the header rule

% Text formatting
\linespread{1.1} % Linespacing
\setlength\parindent{0pt} % Removes all indentation from paragraphs

%----------------------------------------------------------------------------------------
\begin{document}

\section{HMM}
\begin{equation}
X_1 \sim \mu (x_1) \textnormal{ and } X_n|(X_{n-1}=x_{n-1}) \sim f(x_n|x_{n-1})
\end{equation}
\begin{equation}
Y_n|(X_n = x_n) \sim g(y_n|x_n)
\end{equation}


\section{Particle Filters}
\begin{equation}
\textnormal{Prior: }
p(x_{1:n}) = \mu(x_1)\prod_{i=2}^{n} f(x_1|x_{i-1})
\end{equation}

\begin{equation}
\textnormal{Conditional of Y: }
p(y_{1:n}|x_{1:n}) = \prod_{i=1}^{n} g(y_i|x_i)
\end{equation}

\begin{equation}
\textnormal{Conditional of X: }
p(x_{1:n}|y_{1:n}) = \frac{p(x_{1:n},y_{1:n})}{p(y_{1:n})}
\end{equation}

\begin{equation}
\textnormal{Joint: }
p(x_{1:n},y_{1:n}) = p(x_{1:n}) p(y_{1:n}|x_{1:n})
\end{equation}

\begin{equation}
\textnormal{Marginal: }
p(y_{1:n}) = \int p(x_{1:n},y_{1:n})
\end{equation}

\begin{equation}
\textnormal{We have: }
\{p(x_{1:n}|y_{1:n})\}_{n>0}
\textnormal{ and }
\{p(y_{1:n})\}_{n>0}
\end{equation}

\begin{equation}
\textnormal{Want to find: }
\{p(x_n|y_{1:n})\}_{n>0}
\end{equation}

\begin{equation}
\textnormal{Reformulate the joint: }
p(x_{1:n},y_{1:n}) = p(x_{1:n-1},y_{1:n-1}) f(x_n|x_{n-1}) g(y_n|x_n)
\end{equation}

\begin{equation}
\begin{split}
p(x_{1:n},y_{1:n}) &= p(x_{1:n}) p(y_{1:n}|x_{1:n})\\
p(x_{1:n}) &= \mu(x_1)\prod_{i=2}^{n} f(x_1|x_{i-1})
= (\mu(x_1)\prod_{i=2}^{n-1} f(x_1|x_{i-1})) f(x_n|x_{n-1})
= p(x_{1:n-1} (x_n|x_{n-1}))\\
p(y_{1:n}|x_{1:n}) &= \prod_{i=1}^{n} g(y_i|x_i)
= (\prod_{i=1}^{n-1} g(y_i|x_i)) g(y_n|x_n)
= p(y_{1:n-1}|x_{1:n-1}) g(y_n|x_n)\\
p(y_{1:n-1}|x_{1:n-1}) &= \frac{p(x_{1:n-1},y_{1:n-1})}{p(y_{1:n-1})}\\
p(x_{1:n},y_{1:n}) &= p(x_{1:n-1} (x_n|x_{n-1})) \frac{p(x_{1:n-1},y_{1:n-1})}{p(y_{1:n-1})} g(y_n|x_n)
= p(x_{1:n-1},y_{1:n-1}) f(x_n|x_{n-1}) g(y_n|x_n)
\end{split}
\end{equation}

\begin{equation}
\textnormal{Reformulate the conditional of X: }
p(x_{1:n}|y_{1:n}) = p(x_{1:n-1}|y_{1:n-1})\frac{f(x_n|x_{n-1}) g(y_n|x_n)}{p(y_n|y_{1:n-1})}
\end{equation}

\begin{equation}
\begin{split}
p(x_{1:n}|y_{1:n}) &= \frac{p(x_{1:n},y_{1:n})}{p(y_{1:n})}\\
p(x_{1:n},y_{1:n}) &= p(x_{1:n-1},y_{1:n-1}) f(x_n|x_{n-1}) g(y_n|x_n)\\
p(x_{1:n-1},y_{1:n-1}) &= p(y_{1:n-1}) p(x_{1:n-1}|y_{1:n-1})\\
p(y_{1:n-1}) &= \frac{p(y_{1:n-1},y_n)}{p(y_n|y_{1:n-1})} = \frac{p(y_{1:n})}{p(y_n|y_{1:n-1})}\\
p(x_{1:n}|y_{1:n}) &= \frac{1}{p(y_{1:n})}\frac{p(y_{1:n})}{p(y_n|y_{1:n-1})} p(x_{1:n-1}|y_{1:n-1}) f(x_n|x_{n-1}) g(y_n|x_n)\\
&= p(x_{1:n-1}|y_{1:n-1})\frac{f(x_n|x_{n-1}) g(y_n|x_n)}{p(y_n|y_{1:n-1})}\\
\end{split}
\end{equation}


\end{document}